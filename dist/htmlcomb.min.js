/*!
 * htmlcomb v0.1.1
 * https://github.com/fengyuanchen/htmlcomb
 *
 * Copyright 2014 Fengyuan Chen
 * Released under the MIT license
 */

!function(){"use strict";var a,b=function(c){this.defaults=a.extend({},b.DEFAULTS,c),this.source="",this.result=""};b.DEFAULTS={requireDoubleQuotationMarks:!0,replaceSingleQuotationMarks:!0,removeEmptyValue:!0,order:["class","id","name","data","src","for","type","href","value","title","alt","aria","role"]},b.prototype={constructor:b,setup:function(b){"object"==typeof b&&a.extend(this.defaults,b)},format:function(b,c,d){var e;if("string"!=typeof b)throw new Error("The first parameter for `format` method must be a string.");return this.source=b,"object"==typeof c?a.extend(this.defaults,c):"function"==typeof c&&"undefined"==typeof d&&(d=c),e=b.replace(/<(\w+)\s([^<]+)>/g,a.proxy(function(a,b,c){return"<"+b+" "+this.sort(c)+">"},this)),this.result=e,"function"==typeof d&&d.call(this,e),e},comb:function(){return this.format.apply(this,a.toArray(arguments))},sort:function(b){var c=this.defaults.order,d=[],e=[],f=[];return b=this.split(b),a.each(b,function(b){var d=!1;a.each(c,function(a,c){return b.substr(0,a.length)===a?(d=!0,"undefined"==typeof e[c]&&(e[c]=[]),e[c].push(b),!1):void 0}),d||f.push(b)}),a.each(e,function(a){Array.isArray(a)&&(a.length>1&&a.sort(),d.push(a.join(" ")))}),b=d.concat(f.sort()),b.join(" ")},split:function(b){var c=this.defaults,d=[];return"string"==typeof b&&(d=b.match(/\w+(?:\-\w*)*(\=(("[^"]*")|('[^']*')|\w*))?/g),d?a.each(d,function(a,b){var e;a=a.split("="),"undefined"!=typeof a[1]&&(e=a[1].charAt(0),"'"===e&&c.replaceSingleQuotationMarks?a[1]='"'+a[1].replace(/'([^']*)'/g,"$1").replace(/"/g,"&quot;")+'"':'"'!==e&&c.requireDoubleQuotationMarks&&(a[1]='"'+a[1]+'"'),'""'===a[1]&&c.removeEmptyValue&&a.pop()),d[b]=a.join("=")}):d=[]),d}},a={toArray:function(a,b,c){return Array.prototype.slice.call(a,b,c)},each:function(a,b){var c,d;if("function"==typeof b)if(Array.isArray(a))for(d=0,c=a.length;c>d&&b.call(a,a[d],d)!==!1;d++);else if("object"==typeof a)for(d in a)if(a.hasOwnProperty(d)&&b.call(a,a[d],d)===!1)break;return a},extend:function(b){var c=a.toArray(arguments);return c.length>1?c.shift():b=this,a.each(c,function(c){a.each(c,function(a,c){b[c]=a})}),b},proxy:function(b,c){var d=a.toArray(arguments,2);return function(){return b.apply(c,d.concat(a.toArray(arguments)))}}},a.extend(b.prototype,a),"undefined"!=typeof window&&(window.HTMLComb=b),"function"==typeof define&&define.amd&&define("htmlcomb",[],function(){return b}),"object"==typeof module&&(module.exports=b)}();